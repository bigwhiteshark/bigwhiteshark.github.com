---
title: WebGL中的纹理
date: 2017-08-22 19:00
tags: [webgl, texture]
---

## 本节内容

了解纹理贴图的基本概念。
什么是映射纹理？
如何在WebGL中载入纹理？
纹理的是伸展(magnification)与收缩(minification)模式。
纹理的过滤和Mip映射。

## 为什么要使用纹理

在前一节中，我们了解了如何绘制彩色的图形，如何内插出平滑的颜色渐变效果。但如果显示一堵逼真的砖墙，问题就来了。你可能会试图创建很多个三角形，指定它们的颜色和位置来模拟墙面上的坑坑洼洼。如果真的这么做了，那就陷入了繁琐和无意义的苦海中。在三维图形学中，有一项很重要的技术可以解决这个问题。那就是 *纹理映射* 。下面我们来深入了解一下。

  ![墙体](/assets/image/blog/webgl/wall.jpg)


### 纹理映射
从字面理解，就是使用图片渲染在物体的表面上，WebGL中最常见的纹理格式是2D纹理。纹理映射，就是将一张图（就像一张纸）映射（贴）到一个几何图形的表面上去。将一张真实世界的图片贴到一个由两个三角形组成的矩形上，这样矩形表面看上就是这张图片。此时，这张图片又可以称为 **纹理图片**(texture image) 或 *纹理*(texture) 。
纹理映射的作用，就是根据纹理图像，为之前光栅后的每个片元涂上合适的颜色。组成纹理图像的像素又被称为 **纹素** （texel,texture elements）, 每个纹素的颜色都使用RGB或RGBA格式编码。

**纹理图像**：映射的这个图像称为纹理图像；
**纹素**：组成纹理图像的像素称为纹素；
**纹理坐标**：是纹理图像上的坐标，通过纹理坐标可以在纹理图像上获取纹素颜色；

在WebGL中要进行纹理映射，需遵循以下几个步骤：
* 准备好映射到几何图形上的纹理图像。
* 为几何图形配置纹理映射方式。
* 加载纹理图像，对其进行写配置，以在WebGL中使用它。
* 在片元着色器中将相应的纹理从纹理中抽取出来，并将纹素的颜色赋给片元。

### 纹理坐标：

我们使用图形的顶点坐标来确定屏幕上哪些部分被纹理图像覆盖，同理要使用 *纹理坐标* (texture coordinates) 来确定纹理图像的哪些部分将覆盖到几何图形上。纹理坐标是一套新坐标系统，下面就来仔细研究一下。
*纹理坐标* 是纹理图像上的坐标。通过纹理坐标可以在纹理图像上获取纹素颜色。WebGL系统中的纹理坐标系统是二维的。为了将纹理坐标与广泛使用的x坐标和y坐标区分开来，WebGL使用s与t命名纹理坐标（st坐标系统）。

  ![纹理坐标](/assets/image/blog/webgl/texture-coord.png)

纹理图像的四个角坐标为左下角（0.0，0.0），右下角（1.0,0.0），右上角（1.0， 1.0）和左上角（0.0， 1.0）。纹理坐标很通用，因为坐标值与图像自身的尺寸无关，不管是128*128还是128*256的图像，右上角的纹理坐标始终是(1.0, 1.0)。

